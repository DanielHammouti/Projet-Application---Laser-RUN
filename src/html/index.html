<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../css/global.css" />
    <link rel="stylesheet" href="../css/styleguide.css" />
    <link rel="stylesheet" href="../css/style_home.css" />
    <script src="../js/chronometer.js"></script>
    <script>
      // Initialiser le compteur de sessions de tir à 0 au démarrage
      localStorage.setItem('shootingSessions', '0');
    </script>
  </head>
  <body>
    <div class="home-page">
      <div class="div">
        <div class="rectangle-noir">
          <a href="settings_page.html" class="button_settings">
                <img class="parametres" src="../img/parametres.png" alt="Paramètres" /></a>
          <div class="text-rectangle-noir">
            <div class="text-rectangle-noir">Temps Total<br />00 : 00</div>
          </div>
        </div>
        <div class="separation-line"> </div>
        <div class="ordre-depart-container choix-police" style="text-align:center; margin-top: 30px;">
          <div class="ordre-question">Par quelle distance souhaitez-vous commencer ?</div>
          <button class="ordre-btn choix-police" onclick="setOrdrePhases([400,200,600])">400m</button>
          <button class="ordre-btn choix-police" onclick="setOrdrePhases([600,200,400])">600m</button>
        </div>
        <div class="position-cercle">
            <a href="../html/run_page.html" class="button-circle" onclick="resetCourseData(); startChronometer()">
                <div class="ellipse"></div>
                <div class="text">DEBUT</div>
            </a>
        </div>
        <a href="statistic_page.html" class="statistique-wrapper">
                <img class="img" src="../img/parametres.png" alt="Statistiques" /></a>
        
        <a href="statistic_page.html" class="button-wrapper">
        <div class="statistique-wrapper">
          <img class="img" src="../img/statistique.png" />
        </div>
        </a>

        <a href="index.html" class="button-wrapper">
        <div class="accueil-wrapper">
          <img class="img" src="../img/accueil.png" />
        </div>
        </a>

        <a href="history_page.html" class="button-wrapper">
        <div class="historique-wrapper">
          <img class="img" src="../img/historique.png" />
        </div>
        </a>
      </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="../js/auth.js"></script>
    <script src="../js/auth-check.js"></script>
    <script>
    function setOrdrePhases(arr) {
      localStorage.setItem('ordrePhases', JSON.stringify(arr));
      // Optionnel : feedback visuel ou désactiver les boutons après choix
      document.querySelectorAll('.ordre-btn').forEach(btn => btn.disabled = true);
    }
    // Initialisation par défaut si rien n'est choisi
    if (!localStorage.getItem('ordrePhases')) {
      localStorage.setItem('ordrePhases', JSON.stringify([400,200,600]));
    }
    function resetCourseData() {
      localStorage.removeItem('phase1Time');
      localStorage.removeItem('phase2Time');
      localStorage.removeItem('phase3Time');
      localStorage.removeItem('finalTotalTime');
      localStorage.removeItem('shootingSessions');
      localStorage.removeItem('rawRunningGrade');
      localStorage.removeItem('rawShootingGrade');
      localStorage.removeItem('shootingSuccessRate');
      localStorage.removeItem('finalGrade');
      // Ajoute ici d'autres clés à réinitialiser si besoin
    }
    </script>
  </body>
</html>