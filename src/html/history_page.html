<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../css/global.css" />
    <link rel="stylesheet" href="../css/styleguide.css" />
    <link rel="stylesheet" href="../css/style_history.css" />
    <script src="../js/chronometer.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        // Afficher le pourcentage de tirs réussis
        const shootingDisplay = document.querySelector('.resultat-tir');
        if (shootingDisplay) {
          const shootingSuccessRate = parseFloat(localStorage.getItem('shootingSuccessRate')) || 0;
          shootingDisplay.textContent = `Tir Réussi : ${shootingSuccessRate.toFixed(1)}%`;
        }

        // Afficher le temps total final
        const timeDisplay = document.querySelector('.temps-total');
        if (timeDisplay) {
          const finalTime = parseInt(localStorage.getItem('finalTotalTime')) || 0;
          const minutes = Math.floor((finalTime / (1000 * 60))); // Conversion en minutes
          const seconds = Math.floor((finalTime / 1000) % 60); // Reste en secondes
          const timeString = `${minutes.toString().padStart(2, '0')} : ${seconds.toString().padStart(2, '0')}`;
          timeDisplay.innerHTML = `Temps Total<br />${timeString}`;
        }

        // Afficher la note finale
        const gradeDisplay = document.querySelector('.resultat-note');
        if (gradeDisplay) {
          const finalGrade = localStorage.getItem('finalGrade') || 0;
          gradeDisplay.innerHTML = `Vous avez obtenu <br> la note de <br> ${finalGrade}/20`;
        }
      });
    </script>
  </head>
  <body>
    <div class="home-page">
      <div class="div">
        
        <div class="rectangle-noir">
            <a href="settings_page.html" class="button_settings">
                <img class="parametres" src="../img/parametres.png" alt="Paramètres" /></a>
          <div class="text-rectangle-noir">
            <div class="text-rectangle-noir">11 Juin 2025<br />15 : 30</div>
        </div>
        </div>
        <div class="separation-line"></div>
        
        <div class="rectangle">
                <div class="resultat-note">Vous avez obtenu <br> la note de <br> 16 / 20</div>
        </div>

        <div class="resultat-tir">Tir Réussi : XX%</div>
        <div class="temps-total">Temps Total<br />00 : 00 : 00</div>
        
        
        <a href="statistic_page.html" class="button-wrapper">
        <div class="statistique-wrapper">
          <img class="img" src="../img/statistique.png" />
        </div>
        </a>

        <a href="index.html" class="button-wrapper">
        <div class="accueil-wrapper">
          <img class="img" src="../img/accueil.png" />
        </div>
        </a>

        <a href="history_page.html" class="button-wrapper">
        <div class="historique-wrapper">
          <img class="img" src="../img/historique.png" />
        </div>
        </a>
      </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
    <script src="../js/auth.js"></script>
    <script src="../js/auth-check.js"></script>
  </body>
</html>